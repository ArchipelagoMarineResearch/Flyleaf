<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>net6.0-windows;net5.0-windows;net472</TargetFrameworks>
	<UseWindowsForms>true</UseWindowsForms>
	<UseWPF>true</UseWPF>
	<PackageIcon>Flyleaf.png</PackageIcon>
	<PackageIconUrl />
	<RepositoryUrl></RepositoryUrl>
	<Description>Media Player .NET Library for WPF/WinForms (based on FFmpeg/DirectX)</Description>
	<Version>3.4.5</Version>
	<Authors>SuRGeoNix</Authors>
	<Copyright>SuRGeoNix Â© 2022</Copyright>
	<PackageLicenseExpression>LGPL-3.0-or-later</PackageLicenseExpression>
	<PackageProjectUrl>https://github.com/SuRGeoNix/Flyleaf</PackageProjectUrl>
	<PackageTags>flyleaf flyleaflib video audio media player engine framework download extract ffmpeg vortice directx</PackageTags>
	<IncludeSymbols>true</IncludeSymbols>
    <SymbolPackageFormat>snupkg</SymbolPackageFormat>
    <PackageReleaseNotes>
		-= D3D11 Video Processor Support &amp; Media Renderer Improvements =-

		Extends the current embedded video processor (FLVP pixel shaders) with the D3D11VP to support more filters, alternative color conversions, basic bob deinterlace and preparing others including HDR native.
		Use Config.Video.VideoProcessor to choose which one to use. By default "Auto" is recommended to allow the library to switch when it requires.
		* FLVP supports HDR to SDR, D3D11 does not
		* FLVP supports Pan Move/Zoom, D3D11 does not
		* D3D11 possible performs better with color conversion and filters, FLVP supports only brightness/contrast filters
		* D3D11 supports deinterlace (bob)
		* D3D11 currently performs only with video accelerated (hardware) frames

		Adds Config.Video.Deinterlace to enable/disable deinterlace
		Adds Config.Video.Filters to set filters (ensure that is actually available and supported by the VPs)
		Adds Player.LastError to keep track of open/playback/buffering errors in the UI

		Renderer: Code clean up and improvements
		Renderer: TakeSnapshot now works more efficiently

		Audio: Fixes a critical backwards compatibility issue with XAudio by updating Vortice libraries
		Renderer: Possible brings back the broken backwards compatibility (Win7/Win8) from the previous 3.4.4 (not tested)
		VideoDecoder: Fixes few performance issues with the new get_format / hardware frames allocation

		Updates Vortice (you might need to update System.Runtime.CompilerServices.Unsafe to Version&gt;=6.0.0.0)
	</PackageReleaseNotes>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <DocumentationFile>FlyleafLib.xml</DocumentationFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>

  <ItemGroup>
    <None Remove="MediaFramework\MediaRenderer\Shaders\FlyleafPS.hlsl" />
    <None Remove="MediaFramework\MediaRenderer\Shaders\PSSimple.hlsl" />
    <None Remove="MediaFramework\MediaRenderer\Shaders\VSSimple.hlsl" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Include="MediaFramework\MediaRenderer\Shaders\FlyleafPS.hlsl" />
    <EmbeddedResource Include="MediaFramework\MediaRenderer\Shaders\PSSimple.hlsl" />
    <EmbeddedResource Include="MediaFramework\MediaRenderer\Shaders\VSSimple.hlsl" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="FFmpeg.AutoGen" Version="4.4.1.1" />
    <PackageReference Include="Vortice.D3DCompiler" Version="2.1.1-beta4" />
    <PackageReference Include="Vortice.Direct3D11" Version="2.1.1-beta4" />
    <PackageReference Include="Vortice.Mathematics" Version="1.3.24" />
    <PackageReference Include="Vortice.MediaFoundation" Version="2.1.1-beta4" />
    <PackageReference Include="Vortice.XAudio2" Version="2.1.1-beta4" />
  </ItemGroup>
  
  <ItemGroup>
	<Import Include="System" />
    <Import Include="System.Drawing" />
    <Import Include="System.Net.Http" />
    <Import Include="System.Numerics" />
    <Import Include="System.Windows" />
    <Import Include="System.Windows.Forms" />
    <Import Include="System.Xaml" />
    <Import Include="System.Xml.Linq" />
    <Import Include="Microsoft.CSharp" />
    <Import Include="System.Xml" />
    <Import Include="WindowsBase" />
    <Import Include="WindowsFormsIntegration" />
  </ItemGroup>
  
  <ItemGroup>
    <None Include="..\.editorconfig" Link=".editorconfig" />
    <None Include="..\Images\Flyleaf.png">
      <Pack>True</Pack>
      <PackagePath></PackagePath>
    </None>
  </ItemGroup>

</Project>
