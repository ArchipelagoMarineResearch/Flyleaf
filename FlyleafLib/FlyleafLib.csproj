<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>net6.0-windows;net5.0-windows;net472</TargetFrameworks>
	<UseWindowsForms>true</UseWindowsForms>
	<UseWPF>true</UseWPF>
	<PackageIcon>Flyleaf.png</PackageIcon>
	<PackageIconUrl />
	<RepositoryUrl></RepositoryUrl>
	<Description>Media Player .NET Library for WPF/WinForms (based on FFmpeg/DirectX)</Description>
	<Version>3.5</Version>
	<Authors>SuRGeoNix</Authors>
	<Copyright>SuRGeoNix Â© 2022</Copyright>
	<PackageLicenseExpression>LGPL-3.0-or-later</PackageLicenseExpression>
	<PackageProjectUrl>https://github.com/SuRGeoNix/Flyleaf</PackageProjectUrl>
	<PackageTags>flyleaf flyleaflib video audio media player engine framework download extract ffmpeg vortice directx</PackageTags>
	<IncludeSymbols>true</IncludeSymbols>
    <SymbolPackageFormat>snupkg</SymbolPackageFormat>
    <PackageReleaseNotes>
		[Enchantments]
		* Playlists: Adds playlists support (for M3U, PLS, YoutubeDL, Torrent)
		* Sessions: Allows to open a previously opened session with the same configuration
		* Subtitles: Improves suggestions and adds SearchLocal/SearchLocalOnInputType/SearchOnline/SearchOnlineOnInputType configuration
		* Renderer: Improves compatibility with proper fallback to WARP device and improves the way you specify a GPU adapter
		* ModelView: Includes playlist items and streams (embedded and external) in library's model view
		* OpenAsync: Improves threading implementation, locking and interrupts

		[Issues]
		* Fixes a critical issue with timestamps (mainly for some avi files while using show frame prev/next)
		* Fixes an NPE on Renderer's SetViewport
		* Fixes an NPE on Audio.Mute

		[Important / Breaking Changes]
		* Player.Title can now be accessed from Player.Playlist.Selected.Title
		* Player.PlaybackCompleted renamed to Player.PlaybackStopped
		* Player.[AVS].Inputs and Player.[AVS].ExternalStreams can be accessed from Playlist.Items and Playlist.Items[N].External[AVS]Streams
		* LogOutput for files now will not append by default check Engine.Config.LogAppend
		* Config.Video.GPUAdapterLUID renamed to Config.Video.GPUAdapter (LUID can change on system reboot, now you can use a string to match)
		* Player can start playing now before the control's assignment or its handle creation
		* Changes the way that Player's Open Completed events will fire (only what user requested to open). If you still need to catch all the events subscribe on the Decoder Context's events (Player.decoder)
	</PackageReleaseNotes>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <DocumentationFile>FlyleafLib.xml</DocumentationFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>

  <ItemGroup>
    <None Remove="MediaFramework\MediaRenderer\Shaders\FlyleafPS.hlsl" />
    <None Remove="MediaFramework\MediaRenderer\Shaders\PSSimple.hlsl" />
    <None Remove="MediaFramework\MediaRenderer\Shaders\VSSimple.hlsl" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Include="MediaFramework\MediaRenderer\Shaders\FlyleafPS.hlsl" />
    <EmbeddedResource Include="MediaFramework\MediaRenderer\Shaders\PSSimple.hlsl" />
    <EmbeddedResource Include="MediaFramework\MediaRenderer\Shaders\VSSimple.hlsl" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="FFmpeg.AutoGen" Version="4.4.1.1" />
    <PackageReference Include="Vortice.D3DCompiler" Version="2.1.10-beta" />
    <PackageReference Include="Vortice.Direct3D11" Version="2.1.10-beta" />
    <PackageReference Include="Vortice.Mathematics" Version="1.4.13" />
    <PackageReference Include="Vortice.MediaFoundation" Version="2.1.10-beta" />
    <PackageReference Include="Vortice.XAudio2" Version="2.1.10-beta" />
  </ItemGroup>
  
  <ItemGroup>
	<Import Include="System" />
    <Import Include="System.Drawing" />
    <Import Include="System.Net.Http" />
    <Import Include="System.Numerics" />
    <Import Include="System.Windows" />
    <Import Include="System.Windows.Forms" />
    <Import Include="System.Xaml" />
    <Import Include="System.Xml.Linq" />
    <Import Include="Microsoft.CSharp" />
    <Import Include="System.Xml" />
    <Import Include="WindowsBase" />
    <Import Include="WindowsFormsIntegration" />
  </ItemGroup>
	
	<ItemGroup Condition="$(TargetFramework.StartsWith('net4'))">
		<Reference Include="System.Net.Http" />
	</ItemGroup>
  
  <ItemGroup>
    <None Include="..\.editorconfig" Link=".editorconfig" />
    <None Include="..\Images\Flyleaf.png">
      <Pack>True</Pack>
      <PackagePath></PackagePath>
    </None>
  </ItemGroup>

</Project>
